{% extends "templates/apc_base.html" %}

{% block title %}{{ _("Create new IOT Application") }} {% endblock %}

{% block header %}  {% endblock %}

{% block style %}
<link rel="stylesheet" type="text/css" href="/assets/app_center/editor_md/css/editormd.min.css">
<style>
	{% include "templates/includes/app_desc_editor.css" %}
</style>
{% endblock %}

{% block content %}
<form class="ui app form" action="/api/method/app_center.appmgr.new"
	  method="post" accept-charset="utf-8" enctype="multipart/form-data">
	<div class="ui stackable four column grid">
		<div class="column">
			<div class="required inline field">
				<label>{{_("Application Name")}}</label>
				<input placeholder="{{_('Application Name')}}" name="app_name" type="text" tabindex="0">
			</div>
			<div class="required inline field">
				<label>{{_("License Type")}}</label>
				<select class="ui search dropdown" name="license_type">
					<option value="Open">{{_("Free")}}</option>
					<option value="Private">{{_("Private")}}</option>
					<option value="Close">{{_("Close")}}</option>
				</select>
			</div>

			<div class="required inline field">
				<label>{{_("Category")}}</label>
				<select class="ui search dropdown" name="category">
					<option value="">{{_("Select Category")}}</option>
					{% for opt in categories %}
					<option value="{{opt}}">{{opt}}</option>
					{% endfor %}
				</select>
			</div>
			<div class="required inline field">
				<label>{{_("Protocol")}}</label>
				<select class="ui search dropdown" name="protocol">
					<option value="">{{_("Select Protocol")}}</option>
					{% for opt in protocols %}
					<option value="{{opt}}">{{opt}}</option>
					{% endfor %}
				</select>
			</div>

			<div class="required inline field">
				<label>{{_("Device Supplier")}}</label>
				<select class="ui search dropdown" name="device_supplier">
					<option value="">{{_("Select Device Supplier")}}</option>
					{% for opt in suppliers %}
					<option value="{{opt}}">{{opt}}</option>
					{% endfor %}
				</select>
			</div>
			<div class="required inline field">
				<label>{{_("Device Serial")}}</label>
				<input placeholder="{{_('Device Serial')}}" name="device_serial" type="text">
			</div>
		</div>
		<div class="column">
			<div class="inline field">
				<label for="icon_file" class="ui image button">
					<img class="ui small bordered image" src="blank">
					<input type="file" name="icon_file" id="icon_file" style="display: none">
				</label>
			</div>
		</div>
	</div>

	<div class="ui divider"></div>
	<div class="field">
		<label>{{_("Description")}} </label>
		<div id="desc-editormd">
			<textarea name="description">###Application Readme
#####Supported Devices
- XX-100
- XX-102
- XX-15

#####Configuration Example
```json
{
	"port":+"/dev/ttyS1"
}
```</textarea>
		</div>
	</div>

	<div class="ui primary submit button">{{_("Create")}}</div>
	<div class="ui success message"></div>
	<div class="ui error message"></div>
</form>

{% endblock %}

{% block script %}
<script type="text/javascript" src="/assets/app_center/editor_md/editormd.min.js"></script>
<script>
	{% include "templates/includes/app_desc_editor.js" %}
	{% include "templates/includes/app_form.js" %}
	{% include "templates/pages/app_new.js" %}
</script>
{% endblock %}


